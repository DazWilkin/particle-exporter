version: "3"

services:

  prometheus:
    image: prom/prometheus
    volumes:
    - "${PWD}/prometheus.yml:/etc/prometheus/prometheus.yml"
    expose:
    - "9090" # Default HTTP Endpoint
    ports:
    - 9090:9090
    healthcheck:
      test:
      - CMD
      - curl
      - --fail
      - "http://prometheus:9090/-/healthy"
  
  particle-exporter:
    image: dazwilkin/particle-exporter@sha256:559a879f1976da178033a9b81460e4005e487b5a9f2e372259755ad5ffd26e23
    command:
    - --token=${TOKEN}
    expose:
    - "9999"
    ports:
    - 9999:9999
